import"../modulepreload-polyfill.c7c6310f.js";const l=document.querySelector("#search"),h=document.querySelectorAll("[required]"),e=document.querySelector("#year"),i=document.querySelector("#output");for(const a of h)a.closest(".form--group").querySelector("label").classList.add("required");e.setAttribute("max",new Date().getFullYear());e.addEventListener("input",a=>{e.setCustomValidity(""),e.checkValidity()});e.addEventListener("invalid",()=>{Number(e.value)<Number(e.getAttribute("min"))?e.setCustomValidity(`Year must be greater than or equal to ${e.getAttribute("min")}`):Number(e.value)>Number(e.getAttribute("max"))&&e.setCustomValidity(`Year must be less than or equal to ${e.getAttribute("max")}`)});l.addEventListener("submit",async a=>{a.preventDefault();const g=new FormData(l),r=Object.fromEntries(g.entries()),m=l.querySelectorAll("input, button, textarea");i.innerHTML="";for(const t of m)t.disabled=!0;try{let t=`https://www.omdbapi.com/?apikey=${r.key}&t=${r.title}`;r.year&&(t+=`&y=${r.year}`),r.plot&&(t+=`&plot=${r.plot}`);const n=await(await fetch(t)).json();if(n.Response==="False"){const b=document.createElement("p");b.innerText="No results found",i.append(b)}const s=document.createElement("figure");s.classList.add("movie");const u=document.createElement("img");u.src=n.Poster,u.alt=`Poster for ${n.Title}`,s.append(u);const o=document.createElement("figcaption"),d=document.createElement("h2");d.innerText=n.Title,o.append(d);const p=document.createElement("p");p.innerText=n.Year,o.append(p);const y=document.createElement("p");y.innerText=n.Rated,o.append(y);const f=document.createElement("p");f.innerText=n.Plot,o.append(f),s.append(o),i.append(s)}catch{const c=document.createElement("p");c.innerText="There was an error with your search, please check your API key and try again in a few minutes",i.append(c)}for(const t of m)t.disabled=!1});
